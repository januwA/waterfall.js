!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.waterfall=t():e.waterfall=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.Waterfall=n.Waterfall,t.WaterfallAlignment=n.WaterfallAlignment},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.start=0]="start",e[e.center=1]="center",e[e.end=2]="end",e[e.between=3]="between"}(n=t.WaterfallAlignment||(t.WaterfallAlignment={}));t.Waterfall=class{constructor(e){var t,r,o,i;if(!e.root||!e.item)throw Error("构建方式错误: 需要root和item参数!");this.root=e.root,this.item=e.item,this.alignment=null!=(t=e.alignment)?t:n.start,this.reverse=null!=(r=e.reverse)&&r,this.resizeDebounce=null!=(o=e.resizeDebounce)?o:300,this.resize=null==(i=e.resize)||i;const l=document.querySelector(this.root);if(null===l)throw Error(`没有找到根节点："${this.root}" 元素！`);this.rootElm=l,"static"===this._getPV(this.rootElm,"position")&&(this.rootElm.style.position="relative"),this._run()}debounce(e,t=1e3){let r;return(...n)=>{clearTimeout(r),r=window.setTimeout(()=>{e.apply(this,n)},t)}}_run(){this.draw(),this.resize&&(this.debounceDraw=this.debounce(this.draw,this.resizeDebounce),window.addEventListener("resize",this.debounceDraw))}_getPV(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}draw(){const e=document.querySelector(this.item).clientWidth,t=this.rootElm.clientWidth;let r=parseInt((t/e).toString()),o=[];for(let e=0;e<r;e++)o[e]=0;const i=t-e*r,l=t/r,s=Array.from(this.rootElm.querySelectorAll(this.item));for(let t=0;t<s.length;t++){const u=s[t];let a,c=u.clientHeight,f=Math.min(...o),d=o.indexOf(f);u.style.position="absolute",u.style.top=f+"px";let h=this.reverse?r-1-d:d;switch(this.alignment){case n.start:a=h*e;break;case n.center:a=h*e+i/2;break;case n.end:a=h*e+i;break;case n.between:let t=0;d>0&&(t=i/r/(r-d)),a=h*l+t}u.style.left=a+"px",o[d]+=c}}dispose(){this.resize&&this.debounceDraw&&window.removeEventListener("resize",this.debounceDraw)}}}])}));