!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.waterfall=t():e.waterfall=t()}(self,(function(){return(()=>{"use strict";var e={999:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Waterfall=t.WaterfallAlignment=void 0,function(e){e[e.start=0]="start",e[e.center=1]="center",e[e.end=2]="end",e[e.between=3]="between"}(r=t.WaterfallAlignment||(t.WaterfallAlignment={})),t.Waterfall=class{constructor(e){var t,i,o,n;if(!e.root||!e.item)throw Error("构建方式错误: 需要root和item参数!");this.root=e.root,this.item=e.item,this.alignment=null!==(t=e.alignment)&&void 0!==t?t:r.start,this.reverse=null!==(i=e.reverse)&&void 0!==i&&i,this.resizeDebounce=null!==(o=e.resizeDebounce)&&void 0!==o?o:300,this.resize=null===(n=e.resize)||void 0===n||n;const l=document.querySelector(this.root);if(null===l)throw Error(`没有找到根节点："${this.root}" 元素！`);this.rootElm=l,"static"===this._getPV(this.rootElm,"position")&&(this.rootElm.style.position="relative"),this._run()}debounce(e,t=1e3){let r;return(...i)=>{clearTimeout(r),r=window.setTimeout((()=>{e.apply(this,i)}),t)}}_run(){this.draw(),this.resize&&(this.debounceDraw=this.debounce(this.draw,this.resizeDebounce),window.addEventListener("resize",this.debounceDraw))}_getPV(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}draw(){const e=this.rootElm.querySelector(this.item).clientWidth,t=this.rootElm.clientWidth;let i=parseInt((t/e).toString()),o=new Array(i).fill(0);const n=t-e*i,l=t/i,s=Array.from(this.rootElm.querySelectorAll(this.item));for(let t=0;t<s.length;t++){const a=s[t];let u,c=a.clientHeight,d=Math.min(...o),f=o.indexOf(d);a.style.position="absolute",a.style.top=d+"px";let h=this.reverse?i-1-f:f;switch(this.alignment){case r.start:u=h*e;break;case r.center:u=h*e+n/2;break;case r.end:u=h*e+n;break;case r.between:let t=0;f>0&&(t=n/i/(i-f)),u=h*l+t}a.style.left=u+"px",o[f]+=c}}dispose(){this.resize&&this.debounceDraw&&window.removeEventListener("resize",this.debounceDraw)}}}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.WaterfallAlignment=e.Waterfall=void 0;var t=r(999);Object.defineProperty(e,"Waterfall",{enumerable:!0,get:function(){return t.Waterfall}}),Object.defineProperty(e,"WaterfallAlignment",{enumerable:!0,get:function(){return t.WaterfallAlignment}})})(),i})()}));